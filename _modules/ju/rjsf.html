

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ju.rjsf &mdash; ju 0.1.17 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=71734efd"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ju
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju.html">ju</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/json_schema.html">ju.json_schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/oas.html">ju.oas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/pydantic_util.html">ju.pydantic_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/rjsf.html">ju.rjsf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/tests.html">ju.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/tests/oas_test.html">ju.tests.oas_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/tests/pydantic_util_test.html">ju.tests.pydantic_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/tests/rjsf_test.html">ju.tests.rjsf_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/tests/traitlets_util_test.html">ju.tests.traitlets_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/traitlets_util.html">ju.traitlets_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/util.html">ju.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module_docs/ju/viz.html">ju.viz</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ju</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">ju.rjsf</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for ju.rjsf</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Tools for React-JSONSchema-Form (RJSF)&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">copy</span><span class="w"> </span><span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">i2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sig</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ju.json_schema</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">signature_to_json_schema</span><span class="p">,</span>
    <span class="n">DFLT_PARAM_TO_TYPE</span><span class="p">,</span>
    <span class="n">DFLT_FUNC_TITLE</span><span class="p">,</span>
    <span class="n">merge_with_defaults</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ju.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">asis</span>

<span class="c1"># TODO: Change to ju.json_schema.pyname_to_title and redo tests</span>
<span class="n">DFLT_PYNAME_TO_TITLE</span> <span class="o">=</span> <span class="n">asis</span>

<span class="n">base_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">DFLT_FUNC_TITLE</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">}</span>

<span class="n">base_ui_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ui:submitButtonOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;submitText&quot;</span><span class="p">:</span> <span class="s2">&quot;Run&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">BASE_RJSF_SPEC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">base_schema</span><span class="p">,</span>
    <span class="s2">&quot;uiSchema&quot;</span><span class="p">:</span> <span class="n">base_ui_schema</span><span class="p">,</span>
    <span class="s2">&quot;liveValidate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;readonly&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;omitExtraData&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;liveOmit&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;noValidate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;noHtml5Validate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;focusOnFirstError&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;showErrorList&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span>
<span class="p">}</span>


<div class="viewcode-block" id="func_to_form_spec">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.func_to_form_spec">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">func_to_form_spec</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">doc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">param_to_prop_type</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">DFLT_PARAM_TO_TYPE</span><span class="p">,</span>
    <span class="n">nest_under_field</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rjsf&quot;</span><span class="p">,</span>
    <span class="n">base_rjsf_spec</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">BASE_RJSF_SPEC</span><span class="p">,</span>
    <span class="n">pyname_to_title</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DFLT_PYNAME_TO_TITLE</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a JSON object that can be used as a form specification, along with the</span>
<span class="sd">    function, to generate a FuncCaller React component in a React application.</span>

<span class="sd">    param func: The function to transform</span>
<span class="sd">    return: The form specification for the function</span>

<span class="sd">    &gt;&gt;&gt; def foo(</span>
<span class="sd">    ...     a_bool: bool,</span>
<span class="sd">    ...     a_float=3.14,</span>
<span class="sd">    ...     an_int=2,</span>
<span class="sd">    ...     a_str: str = &#39;hello&#39;,</span>
<span class="sd">    ...     something_else=None</span>
<span class="sd">    ... ):</span>
<span class="sd">    ...     &#39;&#39;&#39;A Foo function&#39;&#39;&#39;</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; form_spec = func_to_form_spec(foo)</span>
<span class="sd">    &gt;&gt;&gt; assert form_spec == {</span>
<span class="sd">    ...     &#39;rjsf&#39;: {</span>
<span class="sd">    ...         &#39;schema&#39;: {</span>
<span class="sd">    ...             &#39;title&#39;: &#39;foo&#39;,</span>
<span class="sd">    ...             &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">    ...             &#39;properties&#39;: {</span>
<span class="sd">    ...                 &#39;a_bool&#39;: {&#39;type&#39;: &#39;boolean&#39;},</span>
<span class="sd">    ...                 &#39;a_float&#39;: {&#39;type&#39;: &#39;number&#39;, &#39;default&#39;: 3.14},</span>
<span class="sd">    ...                 &#39;an_int&#39;: {&#39;type&#39;: &#39;integer&#39;, &#39;default&#39;: 2},</span>
<span class="sd">    ...                 &#39;a_str&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;default&#39;: &#39;hello&#39;},</span>
<span class="sd">    ...                 &#39;something_else&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;default&#39;: None}</span>
<span class="sd">    ...             },</span>
<span class="sd">    ...             &#39;required&#39;: [&#39;a_bool&#39;],</span>
<span class="sd">    ...             &#39;description&#39;: &#39;A Foo function&#39;</span>
<span class="sd">    ...         },</span>
<span class="sd">    ...         &#39;uiSchema&#39;: {</span>
<span class="sd">    ...             &#39;ui:submitButtonOptions&#39;: {</span>
<span class="sd">    ...                 &#39;submitText&#39;: &#39;Run&#39;</span>
<span class="sd">    ...             },</span>
<span class="sd">    ...             &#39;a_bool&#39;: {&#39;ui:autofocus&#39;: True}</span>
<span class="sd">    ...         },</span>
<span class="sd">    ...         &#39;liveValidate&#39;: False,</span>
<span class="sd">    ...         &#39;disabled&#39;: False,</span>
<span class="sd">    ...         &#39;readonly&#39;: False,</span>
<span class="sd">    ...         &#39;omitExtraData&#39;: False,</span>
<span class="sd">    ...         &#39;liveOmit&#39;: False,</span>
<span class="sd">    ...         &#39;noValidate&#39;: False,</span>
<span class="sd">    ...         &#39;noHtml5Validate&#39;: False,</span>
<span class="sd">    ...         &#39;focusOnFirstError&#39;: False,</span>
<span class="sd">    ...         &#39;showErrorList&#39;: &#39;top&#39;</span>
<span class="sd">    ...     }</span>
<span class="sd">    ... }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">schema</span><span class="p">,</span> <span class="n">ui_schema</span> <span class="o">=</span> <span class="n">_func_to_rjsf_schemas</span><span class="p">(</span>
        <span class="n">func</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
        <span class="n">param_to_prop_type</span><span class="o">=</span><span class="n">param_to_prop_type</span><span class="p">,</span>
        <span class="n">base_rjsf_spec</span><span class="o">=</span><span class="n">base_rjsf_spec</span><span class="p">,</span>
        <span class="n">pyname_to_title</span><span class="o">=</span><span class="n">pyname_to_title</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># merge these with the base spec</span>
    <span class="n">spec</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">base_rjsf_spec</span><span class="p">)</span>
    <span class="n">spec</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>
    <span class="n">spec</span><span class="p">[</span><span class="s2">&quot;uiSchema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ui_schema</span>

    <span class="k">if</span> <span class="n">nest_under_field</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">nest_under_field</span><span class="p">:</span> <span class="n">spec</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">spec</span></div>



<span class="c1"># --------------------------------------------------------------------------------------</span>
<span class="c1"># utils</span>


<span class="c1"># TODO: This all should really use meshed instead, to be easily composable.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_func_to_rjsf_schemas</span><span class="p">(</span>
    <span class="n">func</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">doc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">base_rjsf_spec</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">BASE_RJSF_SPEC</span><span class="p">,</span>
    <span class="n">pyname_to_title</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DFLT_PYNAME_TO_TITLE</span><span class="p">,</span>
    <span class="n">param_to_prop_type</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">DFLT_PARAM_TO_TYPE</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the JSON schema and the UI schema for a function.</span>

<span class="sd">    param func: The function to transform</span>
<span class="sd">    return: The JSON schema and the UI schema for the function</span>

<span class="sd">    &gt;&gt;&gt; def foo(</span>
<span class="sd">    ...     a_bool: bool,</span>
<span class="sd">    ...     a_float=3.14,</span>
<span class="sd">    ...     an_int=2,</span>
<span class="sd">    ...     a_str: str = &#39;hello&#39;,</span>
<span class="sd">    ...     something_else=None</span>
<span class="sd">    ... ):</span>
<span class="sd">    ...     &#39;&#39;&#39;A Foo function&#39;&#39;&#39;</span>

<span class="sd">    &gt;&gt;&gt; schema, ui_schema = _func_to_rjsf_schemas(foo)</span>
<span class="sd">    &gt;&gt;&gt; assert schema == {</span>
<span class="sd">    ...     &#39;title&#39;: &#39;foo&#39;,</span>
<span class="sd">    ...     &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">    ...     &#39;properties&#39;: {</span>
<span class="sd">    ...         &#39;a_bool&#39;: {&#39;type&#39;: &#39;boolean&#39;},</span>
<span class="sd">    ...         &#39;a_float&#39;: {&#39;type&#39;: &#39;number&#39;, &#39;default&#39;: 3.14},</span>
<span class="sd">    ...         &#39;an_int&#39;: {&#39;type&#39;: &#39;integer&#39;, &#39;default&#39;: 2},</span>
<span class="sd">    ...         &#39;a_str&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;default&#39;: &#39;hello&#39;},</span>
<span class="sd">    ...         &#39;something_else&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;default&#39;: None}</span>
<span class="sd">    ...     },</span>
<span class="sd">    ...     &#39;required&#39;: [&#39;a_bool&#39;],</span>
<span class="sd">    ...     &#39;description&#39;: &#39;A Foo function&#39;</span>
<span class="sd">    ... }</span>
<span class="sd">    &gt;&gt;&gt; assert ui_schema == {</span>
<span class="sd">    ...     &#39;ui:submitButtonOptions&#39;: {&#39;submitText&#39;: &#39;Run&#39;},</span>
<span class="sd">    ...     &#39;a_bool&#39;: {&#39;ui:autofocus&#39;: True}</span>
<span class="sd">    ... }</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">schema</span> <span class="o">=</span> <span class="n">signature_to_json_schema</span><span class="p">(</span>
        <span class="n">func</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
        <span class="n">pyname_to_title</span><span class="o">=</span><span class="n">pyname_to_title</span><span class="p">,</span>
        <span class="n">param_to_prop_type</span><span class="o">=</span><span class="n">param_to_prop_type</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">ui_schema</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">base_rjsf_spec</span><span class="p">[</span><span class="s2">&quot;uiSchema&quot;</span><span class="p">])</span>

    <span class="c1"># Add autofocus to the first field</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">parameters</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">first_param_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">parameters</span><span class="p">))</span>
        <span class="n">ui_schema</span><span class="p">[</span><span class="n">first_param_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ui:autofocus&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="c1"># Return the schemas</span>
    <span class="k">return</span> <span class="n">schema</span><span class="p">,</span> <span class="n">ui_schema</span>


<span class="c1"># --------------------------------------------------------------------------------------</span>
<span class="c1"># RJSF jupyter notebook viewer</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>

<span class="c1"># TODO: Make this import conditional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ipywidgets</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">widgets</span>


<div class="viewcode-block" id="FormConfig">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.FormConfig">[docs]</a>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FormConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for form rendering behavior.&quot;&quot;&quot;</span>

    <span class="n">submit_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Submit&quot;</span>
    <span class="n">show_labels</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">layout_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;400px&quot;</span>
    <span class="n">autofocus_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="display_in_notebook">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.display_in_notebook">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">display_in_notebook</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Display a string in a Jupyter notebook cell.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span>

    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">string</span><span class="p">))</span></div>



<div class="viewcode-block" id="display_form_data">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.display_form_data">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">display_form_data</span><span class="p">(</span>
    <span class="n">form_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;**Submitted data:**</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prints form_data in a nicely formatted way.</span>

<span class="sd">    Args:</span>
<span class="sd">        form_data: The collected form data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

    <span class="n">formatted</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">form_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="n">ensure_ascii</span><span class="p">)</span>
    <span class="n">display_in_notebook</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">```json</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">)</span></div>



<span class="n">DFLT_RJSF_VIEWER_ON_SUBMIT</span> <span class="o">=</span> <span class="n">display_form_data</span>


<div class="viewcode-block" id="RJSFViewer">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.RJSFViewer">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJSFViewer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Renders RJSF specifications as Jupyter widgets.</span>

<span class="sd">    Provides a bridge between RJSF form specifications and ipywidgets,</span>
<span class="sd">    allowing interactive form viewing and data collection in notebooks.</span>

<span class="sd">    Example:</span>

<span class="sd">    &gt;&gt;&gt; rjsf_dict = {&#39;rjsf&#39;: {&#39;schema&#39;: {...}, &#39;uiSchema&#39;: {...}}}</span>
<span class="sd">    &gt;&gt;&gt; viewer = RJSFViewer(rjsf_dict)  # doctest: +SKIP</span>
<span class="sd">    &gt;&gt;&gt; viewer.display()  # doctest: +SKIP</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rjsf_spec</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">on_submit</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">DFLT_RJSF_VIEWER_ON_SUBMIT</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">unpack_form_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FormConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the RJSF viewer.</span>

<span class="sd">        Args:</span>
<span class="sd">            rjsf_spec: The RJSF specification dictionary</span>
<span class="sd">            on_submit: Optional callback for form submission</span>
<span class="sd">            config: Optional form configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rjsf_spec</span> <span class="o">=</span> <span class="n">rjsf_spec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_submit</span> <span class="o">=</span> <span class="n">on_submit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_submit_sig</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">on_submit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">FormConfig</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">unpack_form_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if unpack_form_data not given, use the signature of on_submit</span>
            <span class="c1"># to determine if it (might) require unpacking (if the names of the rjsf</span>
            <span class="c1"># schema are a subset of the names of on_submit, and all required_names of</span>
            <span class="c1"># on_submit are in the rjsf schema)</span>
            <span class="n">on_submit_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_submit_sig</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>
            <span class="n">on_submit_required_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_submit_sig</span><span class="o">.</span><span class="n">required_names</span><span class="p">)</span>
            <span class="n">rjsf_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="n">rjsf_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rjsf&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">unpack_form_data</span> <span class="o">=</span> <span class="n">rjsf_names</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span>
                <span class="n">on_submit_names</span>
            <span class="p">)</span> <span class="ow">and</span> <span class="n">on_submit_required_names</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">rjsf_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unpack_form_data</span> <span class="o">=</span> <span class="n">unpack_form_data</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># set the name to the name of the rjsf_spec if it has one</span>
            <span class="n">name</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rjsf_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rjsf&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_submit_sig</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;RJSF Form&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_widgets</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_form_widget</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_form</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_default_submit_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default handler that prints submitted data in a nicely formatted way.</span>

<span class="sd">        Args:</span>
<span class="sd">            form_data: The collected form data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

        <span class="n">formatted</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">form_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;**Submitted data:**</span><span class="se">\n\n</span><span class="s2">```json</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_extract_schema_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract schema and UI schema from RJSF specification.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple of (schema, ui_schema)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rjsf_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rjsf_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rjsf&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">rjsf_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">ui_schema</span> <span class="o">=</span> <span class="n">rjsf_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uiSchema&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">return</span> <span class="n">schema</span><span class="p">,</span> <span class="n">ui_schema</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_widget_for_property</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop_schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">ui_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create appropriate widget for a schema property.</span>

<span class="sd">        Args:</span>
<span class="sd">            prop_name: Property name</span>
<span class="sd">            prop_schema: Property schema definition</span>
<span class="sd">            ui_config: UI configuration for this property</span>

<span class="sd">        Returns:</span>
<span class="sd">            Configured widget instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop_type</span> <span class="o">=</span> <span class="n">prop_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span>
        <span class="n">default_value</span> <span class="o">=</span> <span class="n">prop_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">widget_kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">prop_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">prop_type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">default_value</span><span class="p">),</span>
                <span class="n">placeholder</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Enter </span><span class="si">{</span><span class="n">prop_name</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">,</span>
                <span class="o">**</span><span class="n">widget_kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop_type</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatText</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">default_value</span><span class="p">)</span> <span class="k">if</span> <span class="n">default_value</span> <span class="k">else</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">widget_kwargs</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop_type</span> <span class="o">==</span> <span class="s2">&quot;integer&quot;</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">default_value</span><span class="p">)</span> <span class="k">if</span> <span class="n">default_value</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">widget_kwargs</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop_type</span> <span class="o">==</span> <span class="s2">&quot;boolean&quot;</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">default_value</span><span class="p">),</span> <span class="o">**</span><span class="n">widget_kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fallback to text input</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">default_value</span><span class="p">),</span> <span class="o">**</span><span class="n">widget_kwargs</span><span class="p">)</span>

        <span class="c1"># Apply autofocus if specified</span>
        <span class="k">if</span> <span class="n">ui_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ui:autofocus&quot;</span><span class="p">):</span>
            <span class="c1"># Note: ipywidgets doesn&#39;t have direct autofocus,</span>
            <span class="c1"># but we can store this info for later use</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">_autofocus</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">widget</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_form</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build the complete form widget structure.&quot;&quot;&quot;</span>
        <span class="n">schema</span><span class="p">,</span> <span class="n">ui_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_schema_info</span><span class="p">()</span>

        <span class="n">title</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;Form&quot;</span><span class="p">)</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">required_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="c1"># Create title widget</span>
        <span class="n">title_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;h3&gt;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&lt;/h3&gt;&quot;</span><span class="p">)</span>

        <span class="c1"># Create description widget if present</span>
        <span class="n">widgets_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">title_widget</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
            <span class="n">desc_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;p&gt;&lt;em&gt;</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&lt;/em&gt;&lt;/p&gt;&quot;</span><span class="p">)</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">desc_widget</span><span class="p">)</span>

        <span class="c1"># Create input widgets for each property</span>
        <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_schema</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">ui_config</span> <span class="o">=</span> <span class="n">ui_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prop_name</span><span class="p">,</span> <span class="p">{})</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_widget_for_property</span><span class="p">(</span><span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_schema</span><span class="p">,</span> <span class="n">ui_config</span><span class="p">)</span>

            <span class="c1"># Mark required fields</span>
            <span class="k">if</span> <span class="n">prop_name</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">description</span> <span class="o">+</span> <span class="s2">&quot; *&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_widgets</span><span class="p">[</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>

        <span class="c1"># Create submit button</span>
        <span class="n">submit_options</span> <span class="o">=</span> <span class="n">ui_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ui:submitButtonOptions&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">submit_text</span> <span class="o">=</span> <span class="n">submit_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;submitText&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">submit_text</span><span class="p">)</span>

        <span class="n">submit_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">submit_text</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="s2">&quot;10px 0 0 0&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">submit_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_submit</span><span class="p">)</span>

        <span class="n">widgets_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">submit_button</span><span class="p">)</span>

        <span class="c1"># Create the main form container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_form_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="n">widgets_list</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">layout_width</span><span class="p">,</span>
                <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;10px&quot;</span><span class="p">,</span>
                <span class="n">border</span><span class="o">=</span><span class="s2">&quot;1px solid #ddd&quot;</span><span class="p">,</span>
                <span class="n">border_radius</span><span class="o">=</span><span class="s2">&quot;5px&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle form submission.</span>

<span class="sd">        Args:</span>
<span class="sd">            button: The submit button widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">form_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_submit</span><span class="p">(</span><span class="n">form_data</span><span class="p">)</span>

<div class="viewcode-block" id="RJSFViewer.get_form_data">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.RJSFViewer.get_form_data">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_form_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract current form data from widgets.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary of form field values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widgets</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span></div>


<div class="viewcode-block" id="RJSFViewer.set_form_data">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.RJSFViewer.set_form_data">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_form_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set form data programmatically.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Dictionary of field values to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widgets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_widgets</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="RJSFViewer.display">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.RJSFViewer.display">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Display the form in the notebook.&quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_form_widget</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_form_widget</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">widget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Access the underlying widget for custom layouts.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_form_widget</span></div>



<div class="viewcode-block" id="create_rjsf_viewer">
<a class="viewcode-back" href="../../module_docs/ju/rjsf.html#ju.rjsf.create_rjsf_viewer">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">create_rjsf_viewer</span><span class="p">(</span>
    <span class="n">rjsf_spec</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">on_submit</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">DFLT_RJSF_VIEWER_ON_SUBMIT</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">unpack_form_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FormConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RJSFViewer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory function to create and display an RJSF viewer.</span>

<span class="sd">    Args:</span>
<span class="sd">        rjsf_spec: The RJSF specification</span>
<span class="sd">        on_submit: Optional submission callback</span>
<span class="sd">        config: Optional form configuration</span>

<span class="sd">    Returns:</span>
<span class="sd">        Configured RJSFViewer instance</span>

<span class="sd">    Example:</span>

<span class="sd">    &gt;&gt;&gt; def handle_data(data):</span>
<span class="sd">    ...     print(f&quot;Received: {data}&quot;)</span>
<span class="sd">    &gt;&gt;&gt; viewer = create_rjsf_viewer(rjsf_dict, on_submit=handle_data)  # doctest: +SKIP</span>
<span class="sd">    &gt;&gt;&gt; viewer.display()  # doctest: +SKIP</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">RJSFViewer</span><span class="p">(</span>
        <span class="n">rjsf_spec</span><span class="p">,</span>
        <span class="n">on_submit</span><span class="o">=</span><span class="n">on_submit</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">unpack_form_data</span><span class="o">=</span><span class="n">unpack_form_data</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
    <span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>