

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ju.json_schema &mdash; ju 0.1.28 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=34399df3"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ju.oas" href="oas.html" />
    <link rel="prev" title="ju" href="../ju.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ju
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ju.html">ju</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ju.json_schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.function_to_json_schema"><code class="docutils literal notranslate"><span class="pre">function_to_json_schema()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.get_properties"><code class="docutils literal notranslate"><span class="pre">get_properties()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.json_schema_to_signature"><code class="docutils literal notranslate"><span class="pre">json_schema_to_signature()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.merge_with_defaults"><code class="docutils literal notranslate"><span class="pre">merge_with_defaults()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.pyname_to_title"><code class="docutils literal notranslate"><span class="pre">pyname_to_title()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.signature_to_json_schema"><code class="docutils literal notranslate"><span class="pre">signature_to_json_schema()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.json_schema.title_to_pyname"><code class="docutils literal notranslate"><span class="pre">title_to_pyname()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oas.html">ju.oas</a></li>
<li class="toctree-l1"><a class="reference internal" href="pydantic_util.html">ju.pydantic_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="rjsf.html">ju.rjsf</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">ju.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/oas_test.html">ju.tests.oas_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/pydantic_util_test.html">ju.tests.pydantic_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/rjsf_test.html">ju.tests.rjsf_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/traitlets_util_test.html">ju.tests.traitlets_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="traitlets_util.html">ju.traitlets_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">ju.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="viz.html">ju.viz</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ju</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ju.json_schema</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/ju/json_schema.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-ju.json_schema">
<span id="ju-json-schema"></span><h1>ju.json_schema<a class="headerlink" href="#module-ju.json_schema" title="Link to this heading">ÔÉÅ</a></h1>
<p>This module provides tools to transform Python functions to JSON schemas.</p>
<p>The main function in this module is <cite>signature_to_json_schema</cite>, which takes a
Python function as input and returns a JSON schema that can be used to generate
a form in a React application.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">mercury</span><span class="p">(</span><span class="n">sweet</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">sour</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Near the sun&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sweet</span> <span class="o">*</span> <span class="n">sour</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">signature_to_json_schema</span><span class="p">(</span><span class="n">mercury</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;mercury&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;sweet&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="s1">&#39;sour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<span class="gp">... </span>         <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sweet&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Near the sun&#39;</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.function_to_json_schema">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">function_to_json_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">func:</span> <span class="pre">~typing.Iterable[~inspect.Parameter]</span> <span class="pre">|</span> <span class="pre">~inspect.Signature</span> <span class="pre">|</span> <span class="pre">~typing.Mapping[str,</span> <span class="pre">~inspect.Parameter]</span> <span class="pre">|</span> <span class="pre">~typing.Callable</span> <span class="pre">|</span> <span class="pre">str,</span> <span class="pre">*,</span> <span class="pre">doc:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">name_of_obj:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~typing.Callable[[~typing.Any],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">functools.partial(&lt;function</span> <span class="pre">name_of_obj&gt;,</span> <span class="pre">default_factory=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;),</span> <span class="pre">pyname_to_title:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">asis&gt;,</span> <span class="pre">param_to_prop_type:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">functools.partial(&lt;function</span> <span class="pre">parametrized_param_to_type&gt;,</span> <span class="pre">type_mapping=((&lt;class</span> <span class="pre">'str'&gt;,</span> <span class="pre">'string'),</span> <span class="pre">(&lt;class</span> <span class="pre">'bool'&gt;,</span> <span class="pre">'boolean'),</span> <span class="pre">(&lt;class</span> <span class="pre">'int'&gt;,</span> <span class="pre">'integer'),</span> <span class="pre">(&lt;class</span> <span class="pre">'float'&gt;,</span> <span class="pre">'number'),</span> <span class="pre">(typing.Mapping,</span> <span class="pre">'object'),</span> <span class="pre">(typing.Sequence[str],</span> <span class="pre">'array')))</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#ju.json_schema.function_to_json_schema" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Transforms a Python function to a JSON schema.</p>
<p>param func: The function to transform
return: The JSON schema (as a dict) for the function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">mercury</span><span class="p">(</span><span class="n">sweet</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">sour</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Near the sun&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sweet</span> <span class="o">*</span> <span class="n">sour</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">signature_to_json_schema</span><span class="p">(</span><span class="n">mercury</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;mercury&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;sweet&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="s1">&#39;sour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<span class="gp">... </span>         <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sweet&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Near the sun&#39;</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/i2mint/i2//blob/f547257c272433b7651d09276afdfb1bb7b2f67b/misc/i2.routing.ipynb#L17">https://github.com/i2mint/i2//blob/f547257c272433b7651d09276afdfb1bb7b2f67b/misc/i2.routing.ipynb#L17</a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.get_properties">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">get_properties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">parameters,</span> <span class="pre">*,</span> <span class="pre">param_to_prop_type:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">functools.partial(&lt;function</span> <span class="pre">parametrized_param_to_type&gt;,</span> <span class="pre">type_mapping=((&lt;class</span> <span class="pre">'str'&gt;,</span> <span class="pre">'string'),</span> <span class="pre">(&lt;class</span> <span class="pre">'bool'&gt;,</span> <span class="pre">'boolean'),</span> <span class="pre">(&lt;class</span> <span class="pre">'int'&gt;,</span> <span class="pre">'integer'),</span> <span class="pre">(&lt;class</span> <span class="pre">'float'&gt;,</span> <span class="pre">'number'),</span> <span class="pre">(typing.Mapping,</span> <span class="pre">'object'),</span> <span class="pre">(typing.Sequence[str],</span> <span class="pre">'array')))</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/json_schema.html#get_properties"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.get_properties" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the properties dict for the JSON schema.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">a_bool</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">a_float</span><span class="o">=</span><span class="mf">3.14</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">an_int</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">a_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">something_else</span><span class="o">=</span><span class="kc">None</span>
<span class="gp">... </span><span class="p">):</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;A Foo function&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">ju.json_schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">DFLT_PARAM_TO_TYPE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">get_properties</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">param_to_prop_type</span><span class="o">=</span><span class="n">DFLT_PARAM_TO_TYPE</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a_bool&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="s1">&#39;a_float&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">},</span>
<span class="gp">... </span>        <span class="s1">&#39;an_int&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
<span class="gp">... </span>        <span class="s1">&#39;a_str&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;hello&#39;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="s1">&#39;something_else&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.json_schema_to_signature">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">json_schema_to_signature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">json_schema:</span> <span class="pre">dict,</span> <span class="pre">*,</span> <span class="pre">type_mapper:</span> <span class="pre">~typing.Sequence[~typing.Tuple]</span> <span class="pre">|</span> <span class="pre">~typing.Mapping</span> <span class="pre">|</span> <span class="pre">~typing.Callable[[KT],</span> <span class="pre">VT]</span> <span class="pre">=</span> <span class="pre">(('string',</span> <span class="pre">&lt;class</span> <span class="pre">'str'&gt;),</span> <span class="pre">('boolean',</span> <span class="pre">&lt;class</span> <span class="pre">'bool'&gt;),</span> <span class="pre">('integer',</span> <span class="pre">&lt;class</span> <span class="pre">'int'&gt;),</span> <span class="pre">('number',</span> <span class="pre">&lt;class</span> <span class="pre">'float'&gt;),</span> <span class="pre">('object',</span> <span class="pre">typing.Mapping),</span> <span class="pre">('array',</span> <span class="pre">typing.Sequence[str])),</span> <span class="pre">default_default,</span> <span class="pre">title_to_pyname:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">title_to_pyname&gt;,</span> <span class="pre">default_annotation,</span> <span class="pre">default_description:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/json_schema.html#json_schema_to_signature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.json_schema_to_signature" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Transforms a JSON schema or OpenAPI parameters list to a Python function signature.
Supports both JSON schema ‚Äòproperties‚Äô and OpenAPI ‚Äòparameters‚Äô.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;earth&#39;</span><span class="p">,</span>
<span class="gp">... </span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="gp">... </span> <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;north&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
<span class="gp">... </span>  <span class="s1">&#39;south&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">},</span>
<span class="gp">... </span>  <span class="s1">&#39;east&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
<span class="gp">... </span>  <span class="s1">&#39;west&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">}},</span>
<span class="gp">... </span> <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;north&#39;</span><span class="p">,</span> <span class="s1">&#39;south&#39;</span><span class="p">],</span>
<span class="gp">... </span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Earth docs&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">json_schema_to_signature</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span>
<span class="go">&lt;Sig (north: str, south: bool, east: int = 1, west: float = 2.0)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;earth&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">docs</span>
<span class="go">&#39;Earth docs&#39;</span>
</pre></div>
</div>
<p># ‚Äî OpenAPI parameters support ‚Äî
&gt;&gt;&gt; openapi_params = {
‚Ä¶     ‚Äòtitle‚Äô: ‚Äòget_thing‚Äô,
‚Ä¶     ‚Äòparameters‚Äô: [
‚Ä¶         {‚Äòname‚Äô: ‚Äòthing_id‚Äô, ‚Äòin‚Äô: ‚Äòpath‚Äô, ‚Äòrequired‚Äô: True, ‚Äòschema‚Äô: {‚Äòtype‚Äô: ‚Äòstring‚Äô}},
‚Ä¶         {‚Äòname‚Äô: ‚Äòdetail‚Äô, ‚Äòin‚Äô: ‚Äòquery‚Äô, ‚Äòrequired‚Äô: False, ‚Äòschema‚Äô: {‚Äòtype‚Äô: ‚Äòboolean‚Äô, ‚Äòdefault‚Äô: False}},
‚Ä¶         {‚Äòname‚Äô: ‚Äòcount‚Äô, ‚Äòin‚Äô: ‚Äòquery‚Äô, ‚Äòschema‚Äô: {‚Äòtype‚Äô: ‚Äòinteger‚Äô, ‚Äòdefault‚Äô: 1}},
‚Ä¶     ],
‚Ä¶     ‚Äòdescription‚Äô: ‚ÄòGet a thing by ID.‚Äô
‚Ä¶ }
&gt;&gt;&gt; sig2 = json_schema_to_signature(openapi_params)
&gt;&gt;&gt; sig2
&lt;Sig (thing_id: str, detail: bool = False, count: int = 1)&gt;
&gt;&gt;&gt; sig2.name
‚Äòget_thing‚Äô
&gt;&gt;&gt; sig2.docs
‚ÄòGet a thing by ID.‚Äô</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.merge_with_defaults">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">merge_with_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrites</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/ju/json_schema.html#merge_with_defaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.merge_with_defaults" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns a new dictionary that combines two dictionaries by using the keys
and order from the first dictionary (defaults) and overwriting its values
with those from the second dictionary (overwrites) when they exist.</p>
<p>Parameters:
- defaults (dict): The base dictionary containing default key-value pairs.
- overwrites (dict): The dictionary containing values to overwrite those in defaults.</p>
<p>Returns:
- dict: A merged dictionary with values from <cite>overwrites</cite> applied to <cite>defaults</cite>.</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">overwrites</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>  <span class="c1"># note the extra key &#39;d&#39;, not in defaults</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merge_with_defaults</span><span class="p">(</span><span class="n">defaults</span><span class="p">,</span> <span class="n">overwrites</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 4, &#39;c&#39;: 5}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.pyname_to_title">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">pyname_to_title</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pyname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/ju/json_schema.html#pyname_to_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.pyname_to_title" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Converts a Python name to a title.</p>
<p>It does this by replacing underscores with spaces and capitalizing the first
letter of each word.
If the name contains camel case, it will be split into words.</p>
<p>A sort of (imperfect) inverse of <cite>title_to_pyname</cite>.</p>
<p>Example:
&gt;&gt;&gt; pyname_to_title(‚Äòhello_world‚Äô)
‚ÄòHello World‚Äô
&gt;&gt;&gt; pyname_to_title(‚ÄòhelloWorld‚Äô)
‚ÄòHello World‚Äô</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.signature_to_json_schema">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">signature_to_json_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">func:</span> <span class="pre">~typing.Iterable[~inspect.Parameter]</span> <span class="pre">|</span> <span class="pre">~inspect.Signature</span> <span class="pre">|</span> <span class="pre">~typing.Mapping[str,</span> <span class="pre">~inspect.Parameter]</span> <span class="pre">|</span> <span class="pre">~typing.Callable</span> <span class="pre">|</span> <span class="pre">str,</span> <span class="pre">*,</span> <span class="pre">doc:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">name_of_obj:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~typing.Callable[[~typing.Any],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">functools.partial(&lt;function</span> <span class="pre">name_of_obj&gt;,</span> <span class="pre">default_factory=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;),</span> <span class="pre">pyname_to_title:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">asis&gt;,</span> <span class="pre">param_to_prop_type:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">functools.partial(&lt;function</span> <span class="pre">parametrized_param_to_type&gt;,</span> <span class="pre">type_mapping=((&lt;class</span> <span class="pre">'str'&gt;,</span> <span class="pre">'string'),</span> <span class="pre">(&lt;class</span> <span class="pre">'bool'&gt;,</span> <span class="pre">'boolean'),</span> <span class="pre">(&lt;class</span> <span class="pre">'int'&gt;,</span> <span class="pre">'integer'),</span> <span class="pre">(&lt;class</span> <span class="pre">'float'&gt;,</span> <span class="pre">'number'),</span> <span class="pre">(typing.Mapping,</span> <span class="pre">'object'),</span> <span class="pre">(typing.Sequence[str],</span> <span class="pre">'array')))</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/ju/json_schema.html#signature_to_json_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.signature_to_json_schema" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Transforms a Python function to a JSON schema.</p>
<p>param func: The function to transform
return: The JSON schema (as a dict) for the function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">mercury</span><span class="p">(</span><span class="n">sweet</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">sour</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Near the sun&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sweet</span> <span class="o">*</span> <span class="n">sour</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">signature_to_json_schema</span><span class="p">(</span><span class="n">mercury</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;mercury&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;sweet&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="s1">&#39;sour&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<span class="gp">... </span>         <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sweet&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Near the sun&#39;</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/i2mint/i2//blob/f547257c272433b7651d09276afdfb1bb7b2f67b/misc/i2.routing.ipynb#L17">https://github.com/i2mint/i2//blob/f547257c272433b7651d09276afdfb1bb7b2f67b/misc/i2.routing.ipynb#L17</a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.json_schema.title_to_pyname">
<span class="sig-prename descclassname"><span class="pre">ju.json_schema.</span></span><span class="sig-name descname"><span class="pre">title_to_pyname</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/ju/json_schema.html#title_to_pyname"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.json_schema.title_to_pyname" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Converts a title to a Python name.</p>
<p>A sort of (imperfect) inverse of <cite>pyname_to_title</cite>.</p>
<p>It does this by replacing spaces with underscores and lowercasing the first
letter of each word.
If the title contains camel case, it will be split into words.</p>
<p>Example:
&gt;&gt;&gt; title_to_pyname(‚ÄòHello World‚Äô)
‚Äòhello_world‚Äô
&gt;&gt;&gt; title_to_pyname(‚ÄòHelloWorld‚Äô)
‚Äòhello_world‚Äô
&gt;&gt;&gt; title_to_pyname(‚Äò3: Hello World‚Äô)
‚Äò_3_hello_world‚Äô
&gt;&gt;&gt; title_to_pyname(‚Äô   heL‚Äî-lO  nt;; wo__rld‚Äô)
‚Äò_he_l_l_o_wo__rld‚Äô</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ju.html" class="btn btn-neutral float-left" title="ju" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="oas.html" class="btn btn-neutral float-right" title="ju.oas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>