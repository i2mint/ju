

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ju.pydantic_util &mdash; ju 0.1.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=fd825880"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ju.rjsf" href="rjsf.html" />
    <link rel="prev" title="ju.oas" href="oas.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ju
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ju.html">ju</a></li>
<li class="toctree-l1"><a class="reference internal" href="json_schema.html">ju.json_schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="oas.html">ju.oas</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ju.pydantic_util</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.ModelExtractor"><code class="docutils literal notranslate"><span class="pre">ModelExtractor</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ju.pydantic_util.ModelExtractor.getter"><code class="docutils literal notranslate"><span class="pre">ModelExtractor.getter()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.data_to_pydantic_model"><code class="docutils literal notranslate"><span class="pre">data_to_pydantic_model()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.field_paths_and_annotations"><code class="docutils literal notranslate"><span class="pre">field_paths_and_annotations()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.infer_json_friendly_type"><code class="docutils literal notranslate"><span class="pre">infer_json_friendly_type()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.is_a_basemodel"><code class="docutils literal notranslate"><span class="pre">is_a_basemodel()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.is_pydantic_model"><code class="docutils literal notranslate"><span class="pre">is_pydantic_model()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.is_type_hint"><code class="docutils literal notranslate"><span class="pre">is_type_hint()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.is_typing_type"><code class="docutils literal notranslate"><span class="pre">is_typing_type()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.is_valid_wrt_model"><code class="docutils literal notranslate"><span class="pre">is_valid_wrt_model()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.match_typevars_to_args"><code class="docutils literal notranslate"><span class="pre">match_typevars_to_args()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.mk_pydantic_model"><code class="docutils literal notranslate"><span class="pre">mk_pydantic_model()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.mk_pydantic_models"><code class="docutils literal notranslate"><span class="pre">mk_pydantic_models()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.model_field_descriptions"><code class="docutils literal notranslate"><span class="pre">model_field_descriptions()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.pydantic_model_to_code"><code class="docutils literal notranslate"><span class="pre">pydantic_model_to_code()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ju.pydantic_util.valid_models"><code class="docutils literal notranslate"><span class="pre">valid_models()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rjsf.html">ju.rjsf</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">ju.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/oas_test.html">ju.tests.oas_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/pydantic_util_test.html">ju.tests.pydantic_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/rjsf_test.html">ju.tests.rjsf_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/traitlets_util_test.html">ju.tests.traitlets_util_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="traitlets_util.html">ju.traitlets_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">ju.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="viz.html">ju.viz</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ju</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ju.pydantic_util</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/ju/pydantic_util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-ju.pydantic_util">
<span id="ju-pydantic-util"></span><h1>ju.pydantic_util<a class="headerlink" href="#module-ju.pydantic_util" title="Link to this heading"></a></h1>
<p>Tools for working with Pydantic models.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ju.pydantic_util.ModelExtractor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">ModelExtractor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">models:</span> <span class="pre">~typing.Mapping[str,</span> <span class="pre">~pydantic.main.BaseModel]</span> <span class="pre">|</span> <span class="pre">~typing.Iterable[~pydantic.main.BaseModel],</span> <span class="pre">*,</span> <span class="pre">getter:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">glom&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#ModelExtractor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.ModelExtractor" title="Link to this definition"></a></dt>
<dd><p>Extracts key paths and corresponding values from data based on matching Pydantic models.</p>
<p><cite>ModelExtractor</cite> takes a collection of models and extracts all valid key paths from
their (nested) schemas. When called on data, it identifies the first model that
matches the structure of the data and returns a <cite>KeysReader</cite>, which is a mapping
of key paths to the corresponding values in the data.</p>
<p>A <cite>KeysReader</cite> instance is a mapping that gives you lazy-evaluated access to values.
With such an instance, you can list the keys (paths) that are valid according to
the schema of the matched model, and extract the corresponding values from the data
at the moment you need them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>models</strong> (<em>Union</em><em>[</em><em>Mapping</em><em>[</em><em>str</em><em>, </em><em>BaseModel</em><em>]</em><em>, </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em><em>]</em>) – A dictionary mapping model names to models, or an iterable of models.
If an iterable is provided, it will be converted to a dictionary using
the model names.</p></li>
<li><p><strong>getter</strong> (<em>Callable</em>) – A function used to extract values from the data based on the identified
paths. Defaults to <cite>glom.glom</cite>, a tool for nested data extraction.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the provided models do not have unique names, either as an iterable or
    in the dictionary keys.</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Item</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">ref</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Playlist</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">... </span>    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Item</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">... </span>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">Playlist</span><span class="p">,</span> <span class="n">User</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extractors</span> <span class="o">=</span> <span class="n">ModelExtractor</span><span class="p">(</span><span class="n">models</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Digital Reveries&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;ref&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;ref&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">extractors</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">[&#39;name&#39;, &#39;items.*.ref&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="go">&#39;Digital Reveries&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;items.*.ref&#39;</span><span class="p">]</span>
<span class="go">[6, 42]</span>
</pre></div>
</div>
<p>The example shows how the <cite>ModelExtractor</cite> class automatically detects the model
(in this case, <cite>Playlist</cite>), retrieves the paths defined by the model schema
(e.g., ‘name’ and ‘items.*.ref’), and extracts the corresponding values from the data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ju.pydantic_util.ModelExtractor.getter">
<span class="sig-name descname"><span class="pre">getter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ju.pydantic_util.ModelExtractor.getter" title="Link to this definition"></a></dt>
<dd><p>Access or construct a value from a given <em>target</em> based on the
specification declared by <em>spec</em>.</p>
<p>Accessing nested data, aka deep-get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.b&#39;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
</pre></div>
</div>
<p>Here the <em>spec</em> was just a string denoting a path,
<code class="docutils literal notranslate"><span class="pre">'a.b'</span></code>. As simple as it should be. You can also use
<code class="xref py py-mod docutils literal notranslate"><span class="pre">glob</span></code>-like wildcard selectors:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;v1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;v2&#39;</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.*.k&#39;</span><span class="p">)</span>
<span class="go">[&#39;v1&#39;, &#39;v2&#39;]</span>
</pre></div>
</div>
<p>In addition to <code class="docutils literal notranslate"><span class="pre">*</span></code>, you can also use <code class="docutils literal notranslate"><span class="pre">**</span></code> for recursive access:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;v3&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;v4&#39;</span><span class="p">}],</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;v0&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;**.k&#39;</span><span class="p">)</span>
<span class="go">[&#39;v0&#39;, &#39;v3&#39;, &#39;v4&#39;]</span>
</pre></div>
</div>
<p>The next example shows how to use nested data to
access many fields at once, and make a new nested structure.</p>
<p>Constructing, or restructuring more-complicated nested data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;e&#39;</span><span class="p">},</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;a.d&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: &#39;c&#39;, &#39;d&#39;: &#39;e&#39;, &#39;h&#39;: [0, 2, 4]}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">glom</span></code> also takes a keyword-argument, <em>default</em>. When set,
if a <code class="docutils literal notranslate"><span class="pre">glom</span></code> operation fails with a <code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code>, the
<em>default</em> will be returned, very much like
<code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.get()</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.xx&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nada&#39;</span><span class="p">)</span>
<span class="go">&#39;nada&#39;</span>
</pre></div>
</div>
<p>The <em>skip_exc</em> keyword argument controls which errors should
be ignored.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({},</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skip_exc</span><span class="o">=</span><span class="ne">ZeroDivisionError</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>object</em>) – the object on which the glom will operate.</p></li>
<li><p><strong>spec</strong> (<em>object</em>) – Specification of the output object in the form
of a dict, list, tuple, string, other glom construct, or
any composition of these.</p></li>
<li><p><strong>default</strong> (<em>object</em>) – An optional default to return in the case
an exception, specified by <em>skip_exc</em>, is raised.</p></li>
<li><p><strong>skip_exc</strong> (<em>Exception</em>) – An optional exception or tuple of
exceptions to ignore and return <em>default</em> (None if
omitted). If <em>skip_exc</em> and <em>default</em> are both not set,
glom raises errors through.</p></li>
<li><p><strong>scope</strong> (<em>dict</em>) – Additional data that can be accessed
via S inside the glom-spec. Read more: <span class="xref std std-ref">scope</span>.</p></li>
</ul>
</dd>
</dl>
<p>It’s a small API with big functionality, and glom’s power is
only surpassed by its intuitiveness. Give it a whirl!</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.data_to_pydantic_model">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">data_to_pydantic_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'DataBasedModel'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_nested_models</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mk_nested_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#data_to_pydantic_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.data_to_pydantic_model" title="Link to this definition"></a></dt>
<dd><p>Generate a dynamic Pydantic model, optionally creating nested models for nested dictionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the Pydantic model to create.</p></li>
<li><p><strong>data</strong> – A dictionary representing the structure of the model.</p></li>
<li><p><strong>defaults</strong> – A dictionary specifying default values for certain fields.</p></li>
<li><p><strong>create_nested_models</strong> – If True, create nested models for nested dictionaries.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dynamically created Pydantic model, with nested models if applicable.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">json_data</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York&quot;</span><span class="p">,</span> <span class="s2">&quot;zipcode&quot;</span><span class="p">:</span> <span class="s2">&quot;10001&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">18</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">data_to_pydantic_model</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="n">defaults</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_instance_custom</span> <span class="o">=</span> <span class="n">M</span><span class="p">(</span>
<span class="gp">... </span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Mountain View&quot;</span><span class="p">,</span> <span class="s2">&quot;zipcode&quot;</span><span class="p">:</span> <span class="s2">&quot;94043&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_instance_custom</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
<span class="go">{&#39;name&#39;: &#39;John&#39;, &#39;age&#39;: 25, &#39;address&#39;: {&#39;city&#39;: &#39;Mountain View&#39;, &#39;zipcode&#39;: &#39;94043&#39;}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_instance_with_defaults</span> <span class="o">=</span> <span class="n">M</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Jane&quot;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;zipcode&quot;</span><span class="p">:</span> <span class="s2">&quot;90001&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_instance_with_defaults</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
<span class="go">{&#39;name&#39;: &#39;Jane&#39;, &#39;age&#39;: 18, &#39;address&#39;: {&#39;city&#39;: &#39;Los Angeles&#39;, &#39;zipcode&#39;: &#39;90001&#39;}}</span>
</pre></div>
</div>
<p>And note that the nested model is also created:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">.</span><span class="n">Address</span><span class="p">(</span><span class="n">city</span><span class="o">=</span><span class="s2">&quot;New York&quot;</span><span class="p">,</span> <span class="n">zipcode</span><span class="o">=</span><span class="s2">&quot;10001&quot;</span><span class="p">)</span>
<span class="go">Address(city=&#39;New York&#39;, zipcode=&#39;10001&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.field_paths_and_annotations">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">field_paths_and_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#field_paths_and_annotations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.field_paths_and_annotations" title="Link to this definition"></a></dt>
<dd><p>Get flattened field paths and their corresponding annotations from a Pydantic model.</p>
<p>Generates a dictionary of dot-separated paths and their corresponding types
from the fields of a given Pydantic BaseModel and any nested BaseModels within it.</p>
<p>The function recursively traverses the fields of the BaseModel and its nested models,
including fields that are lists, sets, tuples, or iterables containing BaseModels.
If the field is a collection containing a BaseModel, the path is marked with a ‘*’.</p>
<p>This structure is compatible with the <cite>glom</cite> library, allowing extraction of values
from a dictionary that matches the BaseModel structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_model</strong> (<em>Type</em><em>[</em><em>BaseModel</em><em>]</em>) – The Pydantic BaseModel to extract field paths and annotations from.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary where the keys are the dot-separated paths to fields</dt><dd><p>and the values are their corresponding types.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Type[Any]]</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">BItem</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">c</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">b</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BItem</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">A</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">field_paths_and_annotations</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_paths</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a.b.*.c&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;a.d&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">paths</span> <span class="o">==</span> <span class="n">expected_paths</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Expected: </span><span class="si">{</span><span class="n">expected_paths</span><span class="si">}</span><span class="s2">, but got: </span><span class="si">{</span><span class="n">paths</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>See that it works with generics:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Generic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">A_with_Generic</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="gp">... </span>    <span class="n">b</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Model_with_Generic</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">A_with_Generic</span><span class="p">[</span><span class="n">BItem</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_paths_and_annotations</span><span class="p">(</span><span class="n">Model_with_Generic</span><span class="p">)</span>
<span class="go">{&#39;a.b.*.c&#39;: &lt;class &#39;int&#39;&gt;, &#39;a.d&#39;: &lt;class &#39;str&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.infer_json_friendly_type">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">infer_json_friendly_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#infer_json_friendly_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.infer_json_friendly_type" title="Link to this definition"></a></dt>
<dd><p>Infers the type of the value for Pydantic model field.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">infer_json_friendly_type</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">infer_json_friendly_type</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
<span class="go">&lt;class &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">infer_json_friendly_type</span><span class="p">({</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">})</span>
<span class="go">&lt;class &#39;dict&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.is_a_basemodel">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">is_a_basemodel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#is_a_basemodel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.is_a_basemodel" title="Link to this definition"></a></dt>
<dd><p>Check if an object is a Pydantic BaseModel.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Some model&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">is_a_basemodel</span><span class="p">,</span> <span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">MyModel</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]]))</span>
<span class="go">[True, True, False, False, False]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.is_pydantic_model">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">is_pydantic_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#is_pydantic_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.is_pydantic_model" title="Link to this definition"></a></dt>
<dd><p>Returns True if the object is a Pydantic model (subclass of BaseModel).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.is_type_hint">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">is_type_hint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#is_type_hint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.is_type_hint" title="Link to this definition"></a></dt>
<dd><p>Returns True if the object is a Pydantic model or a typing type.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.is_typing_type">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">is_typing_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#is_typing_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.is_typing_type" title="Link to this definition"></a></dt>
<dd><p>Returns True if the object is a typing type (e.g., List, Literal, etc.).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.is_valid_wrt_model">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">is_valid_wrt_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data:</span> <span class="pre">~ju.pydantic_util.Data,</span> <span class="pre">model:</span> <span class="pre">~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">*,</span> <span class="pre">factory:</span> <span class="pre">~typing.Callable[[~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">~ju.pydantic_util.Data],</span> <span class="pre">~pydantic.main.BaseModel]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_model_validate&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#is_valid_wrt_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.is_valid_wrt_model" title="Link to this definition"></a></dt>
<dd><p>Check if a json object is valid wrt to a pydantic model.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.match_typevars_to_args">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">match_typevars_to_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">generic_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">TypeVar</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#match_typevars_to_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.match_typevars_to_args" title="Link to this definition"></a></dt>
<dd><p>Given a Pydantic generic model, returns a mapping of type variables to their
concrete types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>generic_model</strong> (<em>Type</em><em>[</em><em>BaseModel</em><em>]</em>) – A generic Pydantic model (e.g., Pair[int, str]).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary mapping type variables (e.g., T and U)
to their concrete types (e.g., int and str).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[TypeVar, Type[Any]]</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">List</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">U</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Pair</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">]):</span>
<span class="gp">... </span>    <span class="n">first</span><span class="p">:</span> <span class="n">T</span>
<span class="gp">... </span>    <span class="n">second</span><span class="p">:</span> <span class="n">U</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">match_typevars_to_args</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="go">{~T: &lt;class &#39;int&#39;&gt;, ~U: &lt;class &#39;str&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.mk_pydantic_model">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">mk_pydantic_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data:</span> <span class="pre">~ju.pydantic_util.Data,</span> <span class="pre">model:</span> <span class="pre">~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">*,</span> <span class="pre">factory:</span> <span class="pre">~typing.Callable[[~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">~ju.pydantic_util.Data],</span> <span class="pre">~pydantic.main.BaseModel]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_model_validate&gt;,</span> <span class="pre">error_callback:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_raise_error&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BaseModel</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#mk_pydantic_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.mk_pydantic_model" title="Link to this definition"></a></dt>
<dd><p>Make a Pydantic model instance from data, parametrizing constructor and error handling.</p>
<p>By default, it uses the <cite>model.model_validate</cite> method, but you can pass a custom
constructor function and error handling callback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A dictionary representing the data to be validated.</p></li>
<li><p><strong>model</strong> – A Pydantic model class.</p></li>
<li><p><strong>factory</strong> – A callable used to construct the model instance.
Defaults to <cite>model.model_validate</cite>.</p></li>
<li><p><strong>error_callback</strong> – A callback to handle validation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Pydantic model instance.</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">... </span>    <span class="n">code</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">mk_pydantic_model</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">User</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span>
<span class="go">User(name=&#39;John&#39;, code=30)</span>
</pre></div>
</div>
<p>Example with custom constructor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">mk_pydantic_model</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="k">lambda</span> <span class="n">model</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span>
<span class="go">User(name=&#39;John&#39;, code=30)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.mk_pydantic_models">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">mk_pydantic_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data:</span> <span class="pre">~ju.pydantic_util.Data,</span> <span class="pre">models:</span> <span class="pre">~typing.Iterable[~typing.Type[~pydantic.main.BaseModel]],</span> <span class="pre">*,</span> <span class="pre">factory:</span> <span class="pre">~typing.Callable[[~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">~ju.pydantic_util.Data],</span> <span class="pre">~pydantic.main.BaseModel]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_model_validate&gt;,</span> <span class="pre">error_callback:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_raise_error&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#mk_pydantic_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.mk_pydantic_models" title="Link to this definition"></a></dt>
<dd><p>The iterable-of-models version of <cite>mk_pydantic_model</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.model_field_descriptions">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">model_field_descriptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'No</span> <span class="pre">description</span> <span class="pre">provided'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#model_field_descriptions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.model_field_descriptions" title="Link to this definition"></a></dt>
<dd><p>Extracts a dictionary of field paths and their descriptions from a Pydantic model,
including nested models.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Type</em><em>[</em><em>BaseModel</em><em>]</em>) – A Pydantic model class.</p></li>
<li><p><strong>prefix</strong> (<em>str</em>) – A prefix for nested fields (used internally during recursion).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of field paths and descriptions.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, str]</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Address</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">city</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;City name&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">zipcode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ZIP code&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the user&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">address</span><span class="p">:</span> <span class="n">Address</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_field_descriptions</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>  
<span class="go">{&#39;name&#39;: &#39;The name of the user&#39;,</span>
<span class="go"> &#39;address.city&#39;: &#39;City name&#39;,</span>
<span class="go"> &#39;address.zipcode&#39;: &#39;ZIP code&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.pydantic_model_to_code">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">pydantic_model_to_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_json_schema_parser_kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#pydantic_model_to_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.pydantic_model_to_code" title="Link to this definition"></a></dt>
<dd><p>Convert a model source (json string, dict, or pydantic model) to pydantic code.</p>
<p>Requires having datamodel-code-generator installed (pip install datamodel-code-generator)</p>
<p>Code was based on: <a class="reference external" href="https://koxudaxi.github.io/datamodel-code-generator/using_as_module/">https://koxudaxi.github.io/datamodel-code-generator/using_as_module/</a></p>
<p>See also this free online converter: <a class="reference external" href="https://jsontopydantic.com/">https://jsontopydantic.com/</a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">json_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;{</span>
<span class="gp">... </span><span class="s1">    &quot;type&quot;: &quot;object&quot;,</span>
<span class="gp">... </span><span class="s1">    &quot;properties&quot;: {</span>
<span class="gp">... </span><span class="s1">        &quot;number&quot;: {&quot;type&quot;: &quot;number&quot;},</span>
<span class="gp">... </span><span class="s1">        &quot;street_name&quot;: {&quot;type&quot;: &quot;string&quot;},</span>
<span class="gp">... </span><span class="s1">        &quot;street_type&quot;: {&quot;type&quot;: &quot;string&quot;,</span>
<span class="gp">... </span><span class="s1">                        &quot;enum&quot;: [&quot;Street&quot;, &quot;Avenue&quot;, &quot;Boulevard&quot;]</span>
<span class="gp">... </span><span class="s1">                        }</span>
<span class="gp">... </span><span class="s1">    }</span>
<span class="gp">... </span><span class="s1">}&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">pydantic_model_to_code</span><span class="p">(</span><span class="n">json_schema</span><span class="p">))</span>  
<span class="go">from __future__ import annotations</span>

<span class="go">from enum import Enum</span>
<span class="go">from typing import Optional</span>

<span class="go">from pydantic import BaseModel</span>


<span class="go">class StreetType(Enum):</span>
<span class="go">    Street = &#39;Street&#39;</span>
<span class="go">    Avenue = &#39;Avenue&#39;</span>
<span class="go">    Boulevard = &#39;Boulevard&#39;</span>


<span class="go">class Model(BaseModel):</span>
<span class="go">    number: Optional[float] = None</span>
<span class="go">    street_name: Optional[str] = None</span>
<span class="go">    street_type: Optional[StreetType] = None</span>
</pre></div>
</div>
<p>This means you can get some model code from an example data dict,
using pydantic_model_to_code</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">data_to_pydantic_model</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span> <span class="s2">&quot;Simple&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">pydantic_model_to_code</span><span class="p">(</span><span class="n">M</span><span class="p">))</span>    
<span class="go">from __future__ import annotations</span>

<span class="go">from pydantic import BaseModel, Field</span>


<span class="go">class Simple(BaseModel):</span>
<span class="go">    name: str = Field(..., title=&#39;Name&#39;)</span>
<span class="go">    age: int = Field(..., title=&#39;Age&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ju.pydantic_util.valid_models">
<span class="sig-prename descclassname"><span class="pre">ju.pydantic_util.</span></span><span class="sig-name descname"><span class="pre">valid_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">json_obj,</span> <span class="pre">models:</span> <span class="pre">~typing.Iterable[~pydantic.main.BaseModel],</span> <span class="pre">*,</span> <span class="pre">factory:</span> <span class="pre">~typing.Callable[[~typing.Type[~pydantic.main.BaseModel],</span> <span class="pre">~ju.pydantic_util.Data],</span> <span class="pre">~pydantic.main.BaseModel]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_model_validate&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ju/pydantic_util.html#valid_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ju.pydantic_util.valid_models" title="Link to this definition"></a></dt>
<dd><p>A generator that yields the models that json_obj is valid wrt to.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">... </span>    <span class="n">code</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Admin</span><span class="p">(</span><span class="n">User</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">pwd</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="n">Admin</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">valid_models</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">models</span><span class="p">)]</span>
<span class="go">[&#39;User&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Thor&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;pwd&quot;</span><span class="p">:</span> <span class="s2">&quot;1234&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">valid_models</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">models</span><span class="p">)]</span>
<span class="go">[&#39;User&#39;, &#39;Admin&#39;]</span>
</pre></div>
</div>
<p>Note that valid_models is a generator, it doesn’t return a list.</p>
<p>Tip, to get the first model that is valid, or None if no model is valid:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_name</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">o</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_valid_model_name</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="k">lambda</span> <span class="n">o</span><span class="p">,</span> <span class="n">models</span><span class="p">:</span> <span class="n">get_name</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">valid_models</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">models</span><span class="p">),</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_valid_model_name</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span> <span class="n">models</span><span class="p">)</span>
<span class="go">&#39;User&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_valid_model_name</span><span class="p">({</span><span class="s2">&quot;something&quot;</span><span class="p">:</span> <span class="s2">&quot;else&quot;</span><span class="p">},</span> <span class="n">models</span><span class="p">)</span>
<span class="go">&#39;None&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="oas.html" class="btn btn-neutral float-left" title="ju.oas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rjsf.html" class="btn btn-neutral float-right" title="ju.rjsf" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>